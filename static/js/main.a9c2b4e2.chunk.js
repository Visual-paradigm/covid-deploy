(this["webpackJsonpcovid-project"]=this["webpackJsonpcovid-project"]||[]).push([[0],{166:function(e,t,a){},167:function(e,t,a){"use strict";a.r(t);var r,n=a(0),o=a.n(n),l=a(21),c=a.n(l),i=(a(66),a(67),a(4)),s=a(8),u=function(e){return{type:"CHANGE",payload:e}},d=Object(i.b)(null,(function(e){return{change:function(t){e(u(t))}}}))((function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),r=a[0],l=a[1],c=Object(n.useState)("Filtros"),i=Object(s.a)(c,2),u=i[0],d=i[1],p=Object(n.useState)([{name:"Edad"},{name:"Sexo"},{name:"Estado"},{name:"Tipo de caso"},{name:"Localidad"}]),m=Object(s.a)(p,1)[0].map((function(t){return o.a.createElement("button",{className:"dropdown-item",onClick:function(){var a;a=t.name,d(a),e.change(["Filtro",a])},type:"button"},t.name)}));return o.a.createElement("div",{className:"dropdown",style:{paddingTop:"10px"}},o.a.createElement("button",{className:"btn btn-primary dropdown-toggle",type:"button",id:"dropdownMenu2",onClick:function(){return l(!r)},"data-toggle":"dropdown","aria-haspopup":"true",style:{width:"180px"},"aria-expanded":"false"},u),r?o.a.createElement("div",{className:"","aria-labelledby":"dropdownMenu",style:{marginLeft:"18px",width:"180px"}},m):null)})),p=[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#a6d5e3"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],m=a(2),f=a.n(m),y=a(7),b=function(){var e=Object(y.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://datosabiertos.bogota.gov.co/api/3/action/datastore_search?resource_id=b64ba3c4-9e41-41b8-b3fd-2da21d627558&limit=20000").then(function(){var e=Object(y.a)(f.a.mark((function e(t){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return a=e.sent,r=h(a.result.records),v(a.result.records),g(a.result.records),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(e){var t={"Engativ\xe1":[0,0],"Usaqu\xe9n":[0,0],"Fontib\xf3n":[0,0],Kennedy:[0,0],Suba:[0,0],Chapinero:[0,0],"Ciudad Bol\xedvar":[0,0],"Barrios Unidos":[0,0],"La Candelaria":[0,0],"Rafael Uribe Uribe":[0,0],"Puente Aranda":[0,0],Usme:[0,0],Teusaquillo:[0,0],Tunjuelito:[0,0],Bosa:[0,0],"Fuera de Bogot\xe1":[0,0],"Santa Fe":[0,0],"Antonio Nari\xf1o":[0,0],"San Crist\xf3bal":[0,0],"Los M\xe1rtires":[0,0],"Sin Dato":[0,0]};return e.map((function(e){var a=e["Localidad de residencia"];return"F"===e.Sexo?t[a][0]+=1:t[a][1]+=1,null})),t},g=function(e){var t={"Engativ\xe1":[0,0,0,0,0,0,0,0,0],"Usaqu\xe9n":[0,0,0,0,0,0,0,0,0],"Fontib\xf3n":[0,0,0,0,0,0,0,0,0],Kennedy:[0,0,0,0,0,0,0,0,0],Suba:[0,0,0,0,0,0,0,0,0],Chapinero:[0,0,0,0,0,0,0,0,0],"Ciudad Bol\xedvar":[0,0,0,0,0,0,0,0,0],"Barrios Unidos":[0,0,0,0,0,0,0,0,0],"La Candelaria":[0,0,0,0,0,0,0,0,0],"Rafael Uribe Uribe":[0,0,0,0,0,0,0,0,0],"Puente Aranda":[0,0,0,0,0,0,0,0,0],Usme:[0,0,0,0,0,0,0,0,0],Teusaquillo:[0,0,0,0,0,0,0,0,0],Tunjuelito:[0,0,0,0,0,0,0,0,0],Bosa:[0,0,0,0,0,0,0,0,0],"Fuera de Bogot\xe1":[0,0,0,0,0,0,0,0,0],"Santa Fe":[0,0,0,0,0,0,0,0,0],"Antonio Nari\xf1o":[0,0,0,0,0,0,0,0,0],"San Crist\xf3bal":[0,0,0,0,0,0,0,0,0],"Los M\xe1rtires":[0,0,0,0,0,0,0,0,0],"Sin Dato":[0,0,0,0,0,0,0,0,0]};return e.map((function(e){if("Fallecido"===e.Estado){1;for(var a=e["Localidad de residencia"],r=parseInt(e.Edad),n=0;n<9;n++)10*n<=r&&r<=10*n+9&&(t[a][n]+=1)}return null})),console.log("dic_loc_edades: ",t),t},h=function(e){var t=[],a=[];return e.map((function(e){var r=e["Localidad de residencia"];if(a.includes(r)){var n=a.indexOf(r);t[n]=t[n]+1}else a.push(r),t.push(1);return null})),{numcasosloc:t,localidades:a}},w=function(){var e=Object(y.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://datosabiertos.bogota.gov.co/dataset/856cb657-8ca3-4ee8-857f-37211173b1f8/resource/497b8756-0927-4aee-8da9-ca4e32ca3a8a/download/loca.geojson").then(function(){var e=Object(y.a)(f.a.mark((function e(t){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return a=e.sent,r=E(a.features),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e){var t=[];return e.map((function(e){var a={};a[0]=e.properties.LocNombre;var r=function(e){var t=[];return e.map((function(e){var a={};return a.lat=e[1],a.lng=e[0],t.push(a),null})),t}(e.geometry.coordinates[0][0]);return a[1]=r,t.push(a),null})),t},T=a(10),j=a(3),x={Localidad:"Localidad",Filter:"Localidad"},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"CHANGE":switch(r[0]){case"Localidad":return Object(j.a)(Object(j.a)({},e),{},{Localidad:r[1]});case"Filtro":return console.log("ChangeFilter",r[1]),Object(j.a)(Object(j.a)({},e),{},{Filter:r[1]});default:return Object(j.a)(Object(j.a)({},e),{},{password:r[1]})}default:return e}},k={PolyLoc:[]},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"CHANGE_DATA":switch(r[0]){case"PolyLoc":return console.log("POLYLOC: ",r[1]),Object(j.a)(Object(j.a)({},e),{},{PolyLoc:r[1]});default:return Object(j.a)(Object(j.a)({},e),{},{password:r[1]})}default:return e}},N=a(53),C=Object(T.c)({reducer_app:L,reducer_user:O}),M=Object(T.d)(C,Object(T.a)(N.a)),S=a(54),A=a.n(S),F=document.createElement("script"),_=[],U=o.a.createElement("div",{id:"content"},o.a.createElement("div",{id:"siteNotice"}),o.a.createElement("h1",{id:"firstHeading",className:"firstHeading"},"Uluru"),o.a.createElement("div",{id:"bodyContent"},"Attribution: Uluru,",o.a.createElement("a",{href:"https://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194"},"https://en.wikipedia.org/w/index.php?title=Uluru"),"(last visited June 22, 2009).")),D=Object(i.b)((function(e){return{App:e.reducer_app}}),(function(e){return{get_positions:function(){e((console.log("get_positions redux"),function(){var e=Object(y.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:a=e.sent,t({type:"CHANGE_DATA",payload:["PolyLoc",a]});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},change:function(t){e(u(t))}}}))((function(e){var t=o.a.createRef(),a=Object(n.useState)(!1),l=Object(s.a)(a,2),c=l[0],i=l[1];Object(n.useEffect)((function(e){F.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAcpnxVkDPet7-hIIVQM0gBMzwfLqb2Jyk&callback=createGoogleMap",window.document.body.appendChild(F),setTimeout((function(){F.addEventListener("load",{googleMap:u(),marker:d({lat:4.638743,lng:-74.085238}),Polygon:m(),circle:y()})}),3e3)}),[c]);var u=function(){i(!0);var e=new window.google.maps.Map(t.current,{zoom:10,center:{lat:4.60971,lng:-74.08175},styles:p,disableDefaultUI:!0});return r=e,e},d=function(t){e.get_positions();var a=window.google,n={url:"http://iconsetc.com/icons-watermarks/simple-purple/bfa/bfa_map-marker/bfa_map-marker_simple-purple_512x512.png",scaledSize:new a.maps.Size(50,50)};return new a.maps.Marker({position:t,map:r,icon:n})},m=function(){setTimeout((function(){var e=_=M.getState().reducer_app.PolyLoc;console.log("addshape: polyloc ",_);for(var t=[],a=0;a<e.length;a++)t.push(f(e[a][1],e[a][0]));return t}),4e3)},f=function(t,a){var n=new window.google.maps.Polygon({paths:t,strokeColor:"#147ef7",strokeOpacity:.8,strokeWeight:2,fillColor:"#147ef7",fillOpacity:.5}),l=o.a.createElement("div",null,"hallu");n.setMap(r),n.addListener("click",(function(t){!function(t){e.change(["Localidad",t])}(a);var n=A.a.renderToString(U);c.setContent(n),c.setContent(l),c.setPosition(t.latLng),c.open(r)}));var c=new window.google.maps.InfoWindow({content:""});return n.setMap(r)},y=function(){return new window.google.maps.Circle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:r,center:{lat:4.638743,lng:-74.085238},radius:1e4})};return o.a.createElement("div",{id:"google-map",ref:t,style:{width:"810px",height:"660px",borderRadius:"20px"}})})),B=a(55),J=a(56),P=a(22),I=a(60),z=a(59),R=a(57),H=function(e){Object(I.a)(a,e);var t=Object(z.a)(a);function a(e){var r;return Object(B.a)(this,a),(r=t.call(this,e)).getData=Object(y.a)(f.a.mark((function e(){var t,a,n,o,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:t=e.sent,console.log(t),a=r.state.charData,n=Math.floor(255*Math.random()),o=Math.floor(255*Math.random()),l=Math.floor(255*Math.random()),a.labels=t.localidades,a.datasets.map((function(e){return e.data=t.numcasosloc,e.backgroundColor="rgba(".concat(n,",").concat(o,",").concat(l,",0.6)"),null})),r.setState({charData:a}),r.setState({dataIsLoaded:!0});case 12:case"end":return e.stop()}}),e)}))),r.dataLoader=function(){return r.state.dataIsLoaded?o.a.createElement("div",null):o.a.createElement("div",null,o.a.createElement("p",null,"Estamos cargando los datos abiertos de Covid-19 Bogot\xe1"))},r.state={dataIsLoaded:!1,Months:["January","February","March","April","May","June","July","August","September","October","November","December"],charData:{labels:["January","February","March","April","May","June","July"],datasets:[{label:"Dataset 1",borderWidth:1,data:[0,0,0,0,0,0,0],borderColor:"rbga(120,120,120,1)"}]}},r.dataLoader=r.dataLoader.bind(Object(P.a)(r)),r}return Object(J.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.props.User;return o.a.createElement("div",{style:{height:"250px",paddingTop:"30px"}},o.a.createElement(this.dataLoader,null),"Localidad"===e.Filter?o.a.createElement(R.a,{data:this.state.charData,width:100,height:50,options:{maintainAspectRatio:!1}}):"\xf1o se",o.a.createElement("div",{className:"row"}))}}]),a}(n.Component),W=Object(i.b)((function(e){return{User:e.reducer_user}}),null)(H),q=(a(166),function(){var e=Object(n.useState)(0),t=Object(s.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)("Marzo"),c=Object(s.a)(l,2),i=c[0],u=c[1];return o.a.createElement("div",{style:{paddingTop:"15px",paddingBottom:"15px",backgroundColor:"#4888f7",color:"#ffff",borderRadius:20}},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-10"},o.a.createElement("input",{onChange:function(e){var t=e.target.value;t<=29&&u("Marzo"),a>29&&u("Abril"),t>61&&u("Mayo"),t>92&&u("Junio"),r(e.target.value)},type:"range",value:a,min:"1",max:"123",className:"slider",list:"tickmarks"})),o.a.createElement("div",{className:"col-md-2"},o.a.createElement("div",{style:{paddingRight:"30px",fontSize:"22px"}},a%31===0?a%31+1:a%31))),o.a.createElement("div",{className:"row",style:{paddingTop:"10px"}},o.a.createElement("div",{className:"col-md-2"},"Marzo"),o.a.createElement("div",{className:"col-md-3"},"Abril"),o.a.createElement("div",{className:"col-md-3"},"Mayo"),o.a.createElement("div",{className:"col-md-2"},"Junio"),o.a.createElement("div",{className:"col-md-2",style:{paddingRight:"50px"}},i)))});var G=Object(i.b)((function(e){return{User:e.reducer_user}}),null)((function(e){var t=e.User;return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-7"},o.a.createElement("div",{style:{paddingTop:"15px"}},o.a.createElement(D,null))),o.a.createElement("div",{className:"col-md-5",style:{paddingTop:"15px"}},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-7"},o.a.createElement("h1",null," ",t.Localidad," ")),o.a.createElement("div",{className:"col-md-5"},o.a.createElement(d,null))),o.a.createElement(W,null))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-7"},o.a.createElement(q,null)),o.a.createElement("div",{className:"col-md-5"}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=o.a.createElement(i.a,{store:M},o.a.createElement(G,null));c.a.render(K,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},61:function(e,t,a){e.exports=a(167)},66:function(e,t,a){},67:function(e,t,a){}},[[61,1,2]]]);
//# sourceMappingURL=main.a9c2b4e2.chunk.js.map