(this["webpackJsonpcovid-project"]=this["webpackJsonpcovid-project"]||[]).push([[0],{166:function(e,t,a){},167:function(e,t,a){"use strict";a.r(t);var r,n=a(0),o=a.n(n),l=a(26),c=a.n(l),s=(a(65),a(66),a(5)),i=a(6),u=function(e){return{type:"CHANGE",payload:e}},d=Object(s.b)(null,(function(e){return{change:function(t){e(u(t))}}}))((function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),r=a[0],l=a[1],c=Object(n.useState)("Filtros"),s=Object(i.a)(c,2),u=s[0],d=s[1],p=Object(n.useState)([{name:"Edad"},{name:"Sexo"},{name:"Estado"},{name:"Tipo de caso"},{name:"Localidad"}]),m=Object(i.a)(p,1)[0].map((function(t){return o.a.createElement("button",{className:"dropdown-item",onClick:function(){var a;a=t.name,d(a),e.change(["Filtro",a])},type:"button"},t.name)}));return o.a.createElement("div",{className:"dropdown",style:{paddingTop:"10px"}},o.a.createElement("button",{className:"btn btn-primary dropdown-toggle",type:"button",id:"dropdownMenu2",onClick:function(){return l(!r)},"data-toggle":"dropdown","aria-haspopup":"true",style:{width:"180px"},"aria-expanded":"false"},u),r?o.a.createElement("div",{className:"","aria-labelledby":"dropdownMenu",style:{marginLeft:"18px",width:"180px"}},m):null)})),p=[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#a6d5e3"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],m=(a(71),function(e){return o.a.createElement("div",{style:{justifyContent:"center"},className:"row"},o.a.createElement("div",{className:"col-md-12"},"map"===e.type?"":o.a.createElement("p",null,"Estamos cargando los datos abiertos de Covid-19 para Bogot\xe1")),o.a.createElement("div",{style:{paddingLeft:"250px"},className:"col-md-10"},o.a.createElement("div",{class:"loader"})))}),f=a(1),b=a.n(f),y=a(4),v=function(){var e=Object(y.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://datosabiertos.bogota.gov.co/api/3/action/datastore_search?resource_id=b64ba3c4-9e41-41b8-b3fd-2da21d627558&limit=20000").then(function(){var e=Object(y.a)(b.a.mark((function e(t){var a,r,n,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return a=e.sent,r=E(a.result.records),n=g(a.result.records),o=h(a.result.records),e.abrupt("return",{localidad:r,genero:n,edad:o});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(e){var t={"Engativ\xe1":[0,0],"Usaqu\xe9n":[0,0],"Fontib\xf3n":[0,0],Kennedy:[0,0],Suba:[0,0],Chapinero:[0,0],"Ciudad Bol\xedvar":[0,0],"Barrios Unidos":[0,0],"La Candelaria":[0,0],"Rafael Uribe Uribe":[0,0],"Puente Aranda":[0,0],Usme:[0,0],Teusaquillo:[0,0],Tunjuelito:[0,0],Bosa:[0,0],"Fuera de Bogot\xe1":[0,0],"Santa Fe":[0,0],"Antonio Nari\xf1o":[0,0],"San Crist\xf3bal":[0,0],"Los M\xe1rtires":[0,0],"Sin Dato":[0,0]};e.map((function(e){var a=e["Localidad de residencia"];return"F"===e.Sexo?t[a][0]+=1:t[a][1]+=1,null}));for(var a=[],r=Object.keys(t),n=function(e){var n=0;r.map((function(a){return n+=t[a][e],null})),a.push(n)},o=0;o<2;o++)n(o);var l=parseInt(a[0])+parseInt(a[1]);return a[0]=a[0]/l*100,a[1]=a[1]/l*100,a},h=function(e){var t={"Engativ\xe1":[0,0,0,0,0,0,0,0,0],"Usaqu\xe9n":[0,0,0,0,0,0,0,0,0],"Fontib\xf3n":[0,0,0,0,0,0,0,0,0],Kennedy:[0,0,0,0,0,0,0,0,0],Suba:[0,0,0,0,0,0,0,0,0],Chapinero:[0,0,0,0,0,0,0,0,0],"Ciudad Bol\xedvar":[0,0,0,0,0,0,0,0,0],"Barrios Unidos":[0,0,0,0,0,0,0,0,0],"La Candelaria":[0,0,0,0,0,0,0,0,0],"Rafael Uribe Uribe":[0,0,0,0,0,0,0,0,0],"Puente Aranda":[0,0,0,0,0,0,0,0,0],Usme:[0,0,0,0,0,0,0,0,0],Teusaquillo:[0,0,0,0,0,0,0,0,0],Tunjuelito:[0,0,0,0,0,0,0,0,0],Bosa:[0,0,0,0,0,0,0,0,0],"Fuera de Bogot\xe1":[0,0,0,0,0,0,0,0,0],"Santa Fe":[0,0,0,0,0,0,0,0,0],"Antonio Nari\xf1o":[0,0,0,0,0,0,0,0,0],"San Crist\xf3bal":[0,0,0,0,0,0,0,0,0],"Los M\xe1rtires":[0,0,0,0,0,0,0,0,0],"Sin Dato":[0,0,0,0,0,0,0,0,0]},a=[],r=[];e.map((function(e){if("Fallecido"===e.Estado){1;for(var a=e["Localidad de residencia"],r=parseInt(e.Edad),n=0;n<9;n++)10*n<=r&&r<=10*n+9&&(t[a][n]+=1)}return null}));for(var n=Object.keys(t),o=function(e){var a=0;n.map((function(r){return a+=t[r][e],null})),r.push(a)},l=0;l<9;l++)o(l);for(var c=0;c<9;c++)a.push("".concat(10*c,"-").concat(10*c+9));return{edades:r,rangos:a}},E=function(e){var t=[],a=[],r=[],n=0;e.map((function(e){var a=e["Localidad de residencia"];if(r.includes(a)){var o=r.indexOf(a);t[o]=t[o]+1,n+=1}else r.push(a),t.push(1),n+=1;return null}));for(var o=0;o<t.length;o++){var l=2*parseInt(100*t[o]/n*255/100);a[o]=l<=255?-l:255}return{numcasosloc:t,localidades:r,peligrosidad:a}},j=function(){var e=Object(y.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://datosabiertos.bogota.gov.co/dataset/856cb657-8ca3-4ee8-857f-37211173b1f8/resource/497b8756-0927-4aee-8da9-ca4e32ca3a8a/download/loca.geojson").then(function(){var e=Object(y.a)(b.a.mark((function e(t){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return a=e.sent,r=w(a.features),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(e){var t=[];return e.map((function(e){var a={};a[0]=e.properties.LocNombre;var r=function(e){var t=[];return e.map((function(e){var a={};return a.lat=e[1],a.lng=e[0],t.push(a),null})),t}(e.geometry.coordinates[0][0]);return a[1]=r,t.push(a),null})),t},O=function(e){return{type:"CHANGE_DATA",payload:e}},T=a(15),x=a(3),k={Localidad:"Localidad",Filter:"Localidad"},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"CHANGE":switch(r[0]){case"Localidad":return Object(x.a)(Object(x.a)({},e),{},{Localidad:r[1]});case"Filtro":return console.log("ChangeFilter",r[1]),Object(x.a)(Object(x.a)({},e),{},{Filter:r[1]});default:return Object(x.a)(Object(x.a)({},e),{},{password:r[1]})}default:return e}},C={PolyLoc:[],Loc:[]},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"CHANGE_DATA":switch(r[0]){case"PolyLoc":return console.log("POLYLOC: ",r[1]),Object(x.a)(Object(x.a)({},e),{},{PolyLoc:r[1]});case"Loc":return console.log("LOC: ",r[1]),Object(x.a)(Object(x.a)({},e),{},{Loc:r[1]});default:return Object(x.a)(Object(x.a)({},e),{},{password:r[1]})}default:return e}},N=a(57),S=Object(T.c)({reducer_app:M,reducer_user:L}),D=Object(T.d)(S,Object(T.a)(N.a)),A=a(58),_=a.n(A),F=document.createElement("script"),I=[],B=[],U=Object(s.b)((function(e){return{App:e.reducer_app}}),(function(e){return{get_positions:function(){e((console.log("get_positions redux"),function(){var e=Object(y.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:a=e.sent,t(O(["PolyLoc",a]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},get_loc:function(){e((console.log("get_localidades redux"),function(){var e=Object(y.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:a=e.sent,t(O(["Loc",a]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},change:function(t){e(u(t))}}}))((function(e){var t=o.a.createRef(),a=Object(n.useState)(!1),l=Object(i.a)(a,2),c=l[0],s=l[1],u=Object(n.useState)(""),d=Object(i.a)(u,2),f=d[0],b=d[1];Object(n.useEffect)((function(e){F.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAcpnxVkDPet7-hIIVQM0gBMzwfLqb2Jyk&callback=createGoogleMap",window.document.body.appendChild(F),setTimeout((function(){F.addEventListener("load",{googleMap:y(),marker:v({lat:4.638743,lng:-74.085238}),Polygon:g()})}),3e3)}),[c]);var y=function(){s(!0);var e=new window.google.maps.Map(t.current,{zoom:10,center:{lat:4.60971,lng:-74.08175},styles:p,disableDefaultUI:!0});return r=e,e},v=function(t){e.get_positions(),e.get_loc();var a=window.google,n={url:"http://iconsetc.com/icons-watermarks/simple-purple/bfa/bfa_map-marker/bfa_map-marker_simple-purple_512x512.png",scaledSize:new a.maps.Size(50,50)};return new a.maps.Marker({position:t,map:r,icon:n})},g=function(){setTimeout((function(){var e=I=D.getState().reducer_app.PolyLoc;console.log("addshape: polyloc ",I);var t=[];B=D.getState().reducer_app.Loc.localidad.peligrosidad,console.log("addShape?Loc: ",B);for(var a=0;a<e.length;a++)t.push(h(e[a][1],e[a][0],B[a]));return t}),8e3)},h=function(t,a,n){var l=window.google,c=255+n;console.log("color_ ",n,"+",c);var s=new l.maps.Polygon({paths:t,strokeColor:"#147ef7",strokeOpacity:.8,strokeWeight:2,fillColor:"rgb(255,"+c+",0)",fillOpacity:.5});s.setMap(r),s.addListener("click",(function(t){!function(t){e.change(["Localidad",t]),b(t),console.log(f)}(a);var n=_.a.renderToString(function(e){return o.a.createElement("div",{id:"content"},o.a.createElement("h3",null," ",e," "),o.a.createElement("div",{id:"bodyContent"},"Attribution: Uluru, (last visited June 22, 2009)."))}(a));i.setContent(n),i.setPosition(t.latLng),i.open(r)}));var i=new window.google.maps.InfoWindow({content:""});return s.setMap(r)};return o.a.createElement("div",{id:"google-map",ref:t,style:{width:"810px",height:"660px",borderRadius:"20px"}},o.a.createElement("div",{style:{paddingTop:"250px"}},o.a.createElement(m,{type:"map"})))})),J=a(9),P=a(10),z=a(12),R=a(11),q=a(14),G=function(e){Object(z.a)(a,e);var t=Object(R.a)(a);function a(e){var r;return Object(J.a)(this,a),(r=t.call(this,e)).getData=Object(y.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t=(t=e.sent).genero,(a=r.state.chartData).datasets.map((function(e){return e.data=t,null})),r.setState({chartData:a}),r.setState({dataIsLoaded:!0});case 8:case"end":return e.stop()}}),e)}))),r.state={dataIsLoaded:!1,chartData:{title:"Distribuci\xf3n de casos por genero",type:"doughnut",labels:["Masculino","Femenino"],datasets:[{data:[220,160],backgroundColor:["#47AEE9","#F186B3"],hoverBackgroundColor:["#47AEE6","#F186B02"]}]}},r}return Object(P.a)(a,[{key:"componentDidMount",value:function(){console.log("dataIsLoaded",this.state.dataIsLoaded),this.getData()}},{key:"render",value:function(){return o.a.createElement("div",{style:{height:"250px",paddingTop:"30px"}},this.state.dataIsLoaded?null:o.a.createElement(m,null),o.a.createElement("h2",null,this.state.chartData.title),o.a.createElement(q.c,{data:this.state.chartData}))}}]),a}(o.a.Component),W=function(e){Object(z.a)(a,e);var t=Object(R.a)(a);function a(e){var r;return Object(J.a)(this,a),(r=t.call(this,e)).getData=Object(y.a)(b.a.mark((function e(){var t,a,n,o,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t=e.sent,r.setState({data:t}),a=Math.floor(255*Math.random()),n=Math.floor(255*Math.random()),o=Math.floor(255*Math.random()),t=t.localidad,console.log(t),(l=r.state.chartData).labels=t.localidades,l.datasets.map((function(e){return e.data=t.numcasosloc,e.backgroundColor="rgba(".concat(a,",").concat(n,",").concat(o,",0.6)"),null})),r.setState({chartData:l}),r.setState({dataIsLoaded:!0});case 14:case"end":return e.stop()}}),e)}))),r.state={dataIsLoaded:!1,data:[],Months:["January","February","March","April","May","June","July","August","September","October","November","December"],chartData:{title:"Distribuci\xf3n de casos por localidad",labels:["January","February","March","April","May","June","July"],datasets:[{label:"Dataset 1",borderWidth:1,data:[0,0,0,0,0,0,0],borderColor:"rbga(120,120,120,1)"}]}},r}return Object(P.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){return o.a.createElement("div",{style:{height:"250px",paddingTop:"30px"}},this.state.dataIsLoaded?null:o.a.createElement(m,null),o.a.createElement("h2",null,this.state.chartData.title),o.a.createElement(q.a,{data:this.state.chartData,width:100,height:50,options:{maintainAspectRatio:!1}}))}}]),a}(o.a.Component),H=function(e){Object(z.a)(a,e);var t=Object(R.a)(a);function a(e){var r;return Object(J.a)(this,a),(r=t.call(this,e)).state={lineData:r.props.lineData},console.log(r.props),r}return Object(P.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h2",null,this.state.lineData.title),o.a.createElement(q.b,{data:this.state.lineData}))}}]),a}(o.a.Component),K={title:"Acumulado de casos",labels:["May 23","May 24","May 25","May 26","May 27"],datasets:[{label:"Total",fill:!0,data:[15,80,120,183,240],lineTension:.1,backgroundColor:"rgba(75,100,192,0.3)",borderColor:"rgba(75,100,192,1)"},{label:"Fallecido",fill:!1,data:[1,10,10,13,20],lineTension:.1,backgroundColor:"rgba(75,192,100,0.4)",borderColor:"rgba(75,192,100,1)"},{label:"Recuperado",fill:!1,data:[1,20,50,93,100],lineTension:.1,backgroundColor:"rgba(100,192,192,0.4)",borderColor:"rgba(100,192,192,1)"},{label:"Activos",fill:!1,data:[10,60,70,83,120],lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)"}]},V=function(e){Object(z.a)(a,e);var t=Object(R.a)(a);function a(e){var r;return Object(J.a)(this,a),(r=t.call(this,e)).state={},r}return Object(P.a)(a,[{key:"render",value:function(){var e=this.props.User;return o.a.createElement("div",{style:{height:"250px",paddingTop:"30px"}},"Localidad"===e.Filter?o.a.createElement(W,null):["Sexo"===e.Filter?o.a.createElement(G,null):["Estado"===e.Filter?o.a.createElement(H,{lineData:K}):null]])}}]),a}(n.Component),Q=Object(s.b)((function(e){return{User:e.reducer_user}}),null)(V),Y=(a(166),function(){var e=Object(n.useState)(0),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)("Marzo"),c=Object(i.a)(l,2),s=c[0],u=c[1];return o.a.createElement("div",{style:{paddingTop:"15px",paddingBottom:"15px",backgroundColor:"#4888f7",color:"#ffff",borderRadius:20}},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-10"},o.a.createElement("input",{onChange:function(e){var t=e.target.value;t<=29&&u("Marzo"),a>29&&u("Abril"),t>61&&u("Mayo"),t>92&&u("Junio"),r(e.target.value)},type:"range",value:a,min:"1",max:"123",className:"slider",list:"tickmarks"})),o.a.createElement("div",{className:"col-md-2"},o.a.createElement("div",{style:{paddingRight:"30px",fontSize:"22px"}},a%31===0?a%31+1:a%31))),o.a.createElement("div",{className:"row",style:{paddingTop:"10px"}},o.a.createElement("div",{className:"col-md-2"},"Marzo"),o.a.createElement("div",{className:"col-md-3"},"Abril"),o.a.createElement("div",{className:"col-md-3"},"Mayo"),o.a.createElement("div",{className:"col-md-2"},"Junio"),o.a.createElement("div",{className:"col-md-2",style:{paddingRight:"50px"}},s)))});var $=Object(s.b)((function(e){return{User:e.reducer_user}}),null)((function(e){var t=e.User;return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-7"},o.a.createElement("div",{style:{paddingTop:"15px"}},o.a.createElement(U,null))),o.a.createElement("div",{className:"col-md-5",style:{paddingTop:"15px"}},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-7"},o.a.createElement("h1",null," ",t.Localidad," ")),o.a.createElement("div",{className:"col-md-5"},o.a.createElement(d,null))),o.a.createElement(Q,null))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-7"},o.a.createElement(Y,null)),o.a.createElement("div",{className:"col-md-5"}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=o.a.createElement(s.a,{store:D},o.a.createElement($,null));c.a.render(X,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e,t,a){e.exports=a(167)},65:function(e,t,a){},66:function(e,t,a){},71:function(e,t,a){}},[[60,1,2]]]);
//# sourceMappingURL=main.11e96ae2.chunk.js.map